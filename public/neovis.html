<!DOCTYPE html>
<html lang="en">

<head>
  <title>Enzen</title>

  <style type="text/css">
    #cypher {
      height: 30px;
    }

    #query {
      margin: auto;
      width: 95%;
      padding: 10px;
    }

    #text {
      display: inline;
      color: black;
    }

    /* new start */
    .dropbtn {
      /* background-color: #3498DB; */
      color: black;
      /* padding: 16px;
      font-size: 16px; */
      border: solid 1px;
      cursor: pointer;
    }

    /* .dropbtn:hover,
    .dropbtn:focus {
      background-color: #2980B9;
    } */

    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f1f1f1;
      min-width: 160px;
      overflow: auto;
      box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
      z-index: 1;
    }

    .dropdown-content input {
      /* color: black;
      padding: 12px 16px;
      text-decoration: none; */
      display: block;
    }

    /* .dropdown input:hover {
      background-color: #ddd;
    } */

    .show {
      display: block;
    }

    .down {
      transform: rotate(45deg);
      -webkit-transform: rotate(45deg);
    }

    .arrow {
      border: solid black;
      border-width: 0 3px 3px 0;
      display: inline-block;
      padding: 3px;
    }

    /* new end */
  </style>

  <!-- Bootstrap Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="assets/css/cs-skin-elastic.css">
  <link rel="stylesheet" href="assets/css/style.css">
  <!-- Add Popoto default CSS styles -->
  <link rel="stylesheet" href="popoto.min.css">
  <link rel="stylesheet" href="assets/css/shared.css">


  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <!-- <script src="https://cdn.neo4jlabs.com/neovis.js/v1.5.0/neovis.js"></script> -->
  <!-- <script type="text/javascript" src="neovis.js"></script> -->
  <!-- Core theme CSS (includes Bootstrap)-->

  <script type="text/javascript" src="neovis.js"></script>

  <script src="https://code.jquery.com/jquery-3.2.1.min.js"
    integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

</head>

<body onload="draw()">

  <nav class="navbar navbar-light bg-light">
    <a id="name" class="navbar-brand" href="#">
      Enzen Digital
    </a>
    <ul class="nav nav-pills">
      <li class="nav-item">
        <!-- button-87 -->
        <button type="button" class="btn btn-dark btn-sm" role="button" id="myBtn">Interactive Graph</button>
      </li>
    </ul>
  </nav>

  <div class="notice-bar">
    Water Model
  </div>

  <div id="query">
    <p id="text">Cypher query:</p>
    <textarea rows="4" cols=50 id="cypher"></textarea>
    <input type="submit" value="Submit" id="reload">
    <input type="submit" value="Stabilize" id="stabilize">

    <!-- new start -->
    <div class="dropdown">
      <button onclick="myFunction()" class="dropbtn">Category Filter <i class="arrow down"></i></button>
      <div id="myDropdown" class="dropdown-content">
        <input type="submit" value="Primary Strategic Goal" id="filter1">
        <input type="submit" value="Strategic Goal" id="filter2">
        <input type="submit" value="Goal" id="filter3">
      </div>
    </div>
    <!-- new end -->

  </div>

  <div id="viz"></div>

  <script>

    function draw() {
      var config = {
        containerId: "viz",
        neo4j: {
          serverUrl: "bolt://35.189.34.111:7687",
          serverUser: "neo4j",
          serverPassword: "enzen"
        },
        visConfig: {
          nodes: {
            shape: 'dot',
            size: 40,
          },
          edges: {
            arrows: {
              to: { enabled: true }
            }
          },
        },
        INTERACTS: {
          value: "weight"
        },
        labels: {
          "Urban Planning": {
            label: "Name"
          },
          "consolidated pool of funding ": {
            label: "Name"
          },
          "Develop preliminary Business Case": {
            label: "Name"
          },
          "forecast volume of recycled water": {
            label: "Name"
          },
          " agree on the circularity value proposition and business position ": {
            label: "Name"
          },
          "Potential future/s of biosolids ": {
            label: "Name"
          },
          "Addressed governance and funding barriers.": {
            label: "Name"
          },
          "Create infrastructure": {
            label: "Name"
          },
          "Future of biogas": {
            label: "Name"
          },
          "We need to know location of land management / boundaries, and infrastructure": {
            label: "Name"
          },
          " review of land management practices.": {
            label: "Name"
          },
          "Goal 2": {
            label: "Name"
          },
          "MW Strategy": {
            label: "Name"
          },
          "Goal 1": {
            label: "Name"
          },
          "understanding of service offering and service objectives": {
            label: "Name"
          },
          "Agree our approach": {
            label: "Name"
          },
          "Goal 4": {
            label: "Name"
          },
          "Goal 3 ": {
            label: "Name"
          },
          "Reduce emissions": {
            label: "Name"
          },
          "We need to drive less km": {
            label: "Name"
          },
          "progress readiness activities as part of an integrated water source portfolio approach.": {
            label: "Name"
          },
          "Goal 6": {
            label: "Name"
          },
          "Goal 5": {
            label: "Name"
          },
          " Energy Strategy ": {
            label: "Name"
          },
          "customer expectations and experience capabilities": {
            label: "Name"
          },
          "measurable KPI's": {
            label: "Name"
          },
          "real-time visibility of opportunities": {
            label: "Name"
          },
          "meet service level gaps": {
            label: "Name"
          },
          "able to measure and monitor ": {
            label: "Name"
          },
          " We need monitor customer capability statements against program goals": {
            label: "Name"
          },
          "conduct Service Mapping": {
            label: "Name"
          },
          "service prioritisation.": {
            label: "Name"
          },
          "increasing TOs’ voice in our business": {
            label: "Name"
          },
          " We need to collaborate with Traditional Owner using captured ecological knowledge to identify short and longer-term opportunities ": {
            label: "Name"
          },
          " plan that unites the reduction, mitigation and adaptation approaches": {
            label: "Name"
          },
          " renewable energy target": {
            label: "Name"
          },
          "net zero emissions mindset that extends beyond current thinking": {
            label: "Name"
          },
          " Essential Services Commission": {
            label: "Name"
          },
          "We need to have data and information captured to understand impacts": {
            label: "Name"
          },
          "Urban Planning": {
            label: "Name"
          },
          "Collaboration with strategic partners": {
            label: "Name"
          },
          "targeted influencing plan": {
            label: "Name"
          },
          "Review and update Melbourne Water’s investment prioritisation process": {
            label: "Name"
          },
          "Agreed industry approach to IWM investment ": {
            label: "Name"
          },
          "Influence and be IWM leaders through active demonstration.": {
            label: "Name"
          },
          "Biogas value proposition ": {
            label: "Name"
          },
          "2026 Price Submission": {
            label: "Name"
          },
          "water resource planning": {
            label: "Name"
          },
          "Agreed and progressed water sector (and industry) approach ": {
            label: "Name"
          },
          "detailed concepts (both at the treatment plant and system level),": {
            label: "Name"
          },
          "Understand the forecasted volume of recycled water": {
            label: "Name"
          },
          "The business case for resource recovery and renewable energy hubs": {
            label: "Name"
          },
          "Key readiness activities ": {
            label: "Name"
          },
          "Planning and investment in readiness activities ": {
            label: "Name"
          },
          "Increased community understanding and acceptance towards ‘One Water’": {
            label: "Name"
          },
          "Melbourne Water publishes an outlook for the water system ": {
            label: "Name"
          },
          "We need to have data": {
            label: "Name"
          },
          "We need to have clarity around current vs future capability.": {
            label: "Name"
          },
          "We need to align to the natural assets such as waterways and open spaces have been crucial to community wellbeing": {
            label: "Name"
          },
          " We need to have partnerships with organisations that can enable Traditional Owners business capability eg. data reconnaissance": {
            label: "Name"
          },
          "We need to be seen as a company that is reducing emission by using green vehicles": {
            label: "Name"
          },
          " We need to collaborate with Traditional Owner using captured  ecological knowledge to identify short and longer-term opportunities ": {
            label: "Name"
          },

        },
        relationships: {
          // INTERACTS: {
          // 	value: "weight"
          // }
        },
        initialCypher: "Match (n)-[r]->(m) Return n,r,m"
      };

      viz = new NeoVis.default(config);
      viz.render();
      console.log(viz);
    }

    document.getElementById("myBtn").addEventListener("click", myFunction);
    function myFunction() {
      window.location.href = "index.html";
    }
  </script>

  <script>
    $("#reload").click(function () {

      var cypher = $("#cypher").val();

      if (cypher.length > 3) {
        viz.renderWithCypher(cypher);
      } else {
        console.log("reload");
        viz.reload();
      }
    });

    $("#stabilize").click(function () {
      viz.stabilize();
    });

    $("#filter1").click(function () {

      var cypher = 'MATCH (n) WHERE n.Category = "Primary Strategic Goal" RETURN *'

      if (cypher.length > 3) {
        viz.renderWithCypher(cypher);
      } else {
        console.log("reload");
        viz.reload();
      }
    });

    $("#filter2").click(function () {

      var cypher = 'MATCH (n) WHERE n.Category = "Strategic Goal" RETURN *'

      if (cypher.length > 3) {
        viz.renderWithCypher(cypher);
      } else {
        console.log("reload");
        viz.reload();
      }
    });

    $("#filter3").click(function () {

      var cypher = 'MATCH (n) WHERE n.Category = "Goal" RETURN *'

      if (cypher.length > 3) {
        viz.renderWithCypher(cypher);
      } else {
        console.log("reload");
        viz.reload();
      }
    });


  </script>

  <script>
    /* When the user clicks on the button, 
    toggle between hiding and showing the dropdown content */
    function myFunction() {
      document.getElementById("myDropdown").classList.toggle("show");
    }

    // Close the dropdown if the user clicks outside of it
    window.onclick = function (event) {
      if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains('show')) {
            openDropdown.classList.remove('show');
          }
        }
      }
    }
  </script>

  <!-- Bootstrap Optional JavaScript -->
  <!-- jQuery, Popper.js, Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
</body>

</html>